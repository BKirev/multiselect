var e;function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?t(Object(l),!0).forEach((function(t){r(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}import{toRefs as l,ref as u,computed as a,watch as o,nextTick as i,openBlock as c,createBlock as s,withKeys as p,withModifiers as f,createVNode as d,renderSlot as v,toDisplayString as b,createCommentVNode as h,Fragment as y,renderList as m,createTextVNode as g,withDirectives as O,vModelText as S,vShow as w,Transition as P,withCtx as k}from"vue";function j(e){return String(e).toLowerCase().trim()}function x(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t,n){var r=l(e),o=r.value,i=r.options,c=r.mode,s=r.trackBy,p=r.limit,f=r.hideSelectedTag,d=r.createTag,v=r.label,b=r.appendNewTag,h=r.multipleLabel,y=r.object,m=n.search,g=n.blurSearch,O=n.clearSearch,S=n.update,w=n.blurInput,P=u([]),k=a((function(){var e,t=void 0===i||void 0===i.value?[]:i.value;return e=t,"[object Object]"===Object.prototype.toString.call(e)&&(t=Object.keys(t).map((function(e){var n,r=t[e];return B(n={value:e},s.value,r),B(n,v.value,r),n}))),t=t.map((function(e,t){var n;return"object"===q(e)?e:(B(n={value:t},s.value,e),B(n,v.value,e),n)})),P.value.length&&(t=t.concat(P.value)),t})),T=a((function(){var e=k.value;return M.value.length&&(e=M.value.concat(e)),m.value&&(e=e.filter((function(e){return-1!==j(e[s.value]).indexOf(j(m.value))}))),f.value&&(e=e.filter((function(e){return!W(e)}))),p.value>0&&(e=e.slice(0,p.value)),e})),A=a((function(){return H.value||0===o.value.length||y.value?o.value:"single"==c.value?U(o.value):o.value.map((function(e){return U(e)}))})),E=a((function(){switch(c.value){case"single":return!H.value;case"multiple":case"tags":return!H.value&&o.value.length>0}})),I=a((function(){return void 0!==h&&void 0!==h.value?h.value(o.value):o.value&&o.value.length>1?"".concat(o.value.length," options selected"):"1 option selected"})),C=a((function(){return!k.value.length})),L=a((function(){return k.value.length>0&&0==T.value.length})),M=a((function(){var e;return!1!==d.value&&m.value?-1!==_(m.value)?[]:[(e={},B(e,v.value,m.value),B(e,s.value,m.value),B(e,"value",m.value),e)]:[]})),$=a((function(){switch(c.value){case"single":return null;case"multiple":case"tags":return[]}})),H=a((function(){return-1!==[null,void 0].indexOf(o.value)})),N=function(e){switch("object"!==q(e)&&(e=U(e)),c.value){case"single":S(F(e));break;case"multiple":case"tags":S(x(o.value||[]).concat(F(e)))}t.emit("select",F(e))},K=function(e){switch("object"!==q(e)&&(e=U(e)),c.value){case"single":R();break;case"tags":case"multiple":S(o.value.filter((function(t){return y.value&&t.value!=e.value||!y.value&&t!=e.value})))}t.emit("deselect",F(e))},F=function(e){return y.value?e:e.value},R=function(e){S($.value)},D=function(e){switch(c.value){case"single":return!H.value&&A.value.value==e.value;case"tags":case"multiple":return!H.value&&-1!==A.value.map((function(e){return e.value})).indexOf(e.value)}},U=function(e){return k.value[k.value.map((function(e){return e.value})).indexOf(e)]},_=function(e){return k.value.map((function(e){return j(e[s.value])})).indexOf(j(e))},W=function(e){return"tags"===c.value&&f.value&&D(e)},V=function(e){P.value.push(e)};return{filteredOptions:T,hasSelected:E,multipleLabelText:I,extendedOptions:k,noOptions:C,noResults:L,valueObject:A,select:N,deselect:K,remove:function(e){K(e)},clear:R,isSelected:D,getOption:U,handleOptionClick:function(e){switch(c.value){case"single":if(D(e))return void K(e);R(),N(e),g(),w();break;case"multiple":if(D(e))return void K(e);N(e),O();break;case"tags":if(D(e))return void K(e);void 0===U(e.value)&&d.value&&(t.emit("tag",e.value),b.value&&V(e),O()),N(e)}}}}function E(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C={name:"Multiselect",emits:["open","close","select","deselect","input","search-change","tag"],props:(e={value:{required:!0},options:{type:[Array,Object],required:!1},id:{type:[String,Number],required:!1,default:"multiselect"},name:{type:[String,Number],required:!1,default:"multiselect"}},r(e,"name",{type:[String,Number],required:!1,default:""}),r(e,"disabled",{type:Boolean,required:!1,default:!1}),r(e,"label",{type:String,required:!1,default:"label"}),r(e,"trackBy",{type:String,required:!1,default:"label"}),r(e,"placeholder",{type:String,required:!1,default:null}),r(e,"mode",{type:String,required:!1,default:"single"}),r(e,"searchable",{type:Boolean,required:!1,default:!1}),r(e,"limit",{type:Number,required:!1,default:-1}),r(e,"maxHeight",{type:Number,required:!1,default:160}),r(e,"hideSelectedTag",{type:Boolean,required:!1,default:!0}),r(e,"createTag",{type:Boolean,required:!1,default:!1}),r(e,"appendNewTag",{type:Boolean,required:!1,default:!0}),r(e,"caret",{type:Boolean,required:!1,default:!0}),r(e,"loading",{type:Boolean,required:!1,default:!1}),r(e,"disabled",{type:Boolean,required:!1,default:!1}),r(e,"noOptionsText",{type:String,required:!1,default:"The list is empty"}),r(e,"noResultsText",{type:String,required:!1,default:"No results found"}),r(e,"multipleLabel",{type:Function,required:!1}),r(e,"object",{type:Boolean,required:!1,default:!1}),e),setup:function(e,t){var r=function(e,t){return{update:function(e){t.emit("input",e)}}}(0,t),c=function(e,t){var n=l(e),r=n.searchable,i=n.value,c=n.mode,s=u(null),p=u(null),f=a((function(){return s.value?"".concat(s.value.length,"ch"):"tags"===c.value&&-1===[null,void 0].indexOf(i.value)&&i.value.length?"1ch":"100%"}));return o(s,(function(e){t.emit("search-change",e)})),{search:s,input:p,tagsSearchWidth:f,clearSearch:function(){s.value=null},blurSearch:function(){r.value&&p.value.blur()},handleTagsSearchBackspace:function(e){null!==s.value&&e.stopPropagation(),""===s.value&&(s.value=null)}}}(e,t),s=function(e,t,n){var r=l(e),o=r.maxHeight,i=r.disabled,c=u(!1),s=a((function(){return"".concat(o.value,"px")}));return{isOpen:c,contentMaxHeight:s,open:function(){i.value||(c.value=!0,t.emit("open"))},close:function(){c.value=!1,t.emit("close")}}}(e,t),p=function(e,t,n){var r=l(e),o=r.searchable,i=r.id;return{multiselect:u(null),tabindex:a((function(){return o.value?-1:0})),blurInput:function(){document.getElementById(i.value).querySelector(".multiselect-input").blur()}}}(e),f=A(e,t,{search:c.search,blurSearch:c.blurSearch,clearSearch:c.clearSearch,update:r.update,blurInput:p.blurInput}),d=function(e,t,n){var r=l(e).id,a=n.filteredOptions,c=n.handleOptionClick,s=n.search,p=u(null),f=function(e){p.value=e},d=function(){p.value=a.value[0]||null},v=function(){p.value=null},b=function(){var e=document.getElementById(r.value).querySelector(".is-pointed");if(e){var t=e.parentElement;e.offsetTop+e.offsetHeight>t.clientHeight+t.scrollTop&&(t.scrollTop=e.offsetTop+e.offsetHeight-t.clientHeight),e.offsetTop<t.scrollTop&&(t.scrollTop=e.offsetTop)}};return o(s,(function(e){d()})),{pointer:p,isPointed:function(e){return!!p.value&&p.value.value==e.value},setPointer:f,setPointerFirst:d,clearPointer:v,selectPointer:function(){p.value&&(c(p.value),v())},forwardPointer:function(e){if(null===p.value)f(a.value[0]);else{var t=a.value.map((function(e){return e.value})).indexOf(p.value.value)+1;a.value.length<=t&&(t=0),f(a.value[t])}i((function(){b()}))},backwardPointer:function(){if(null===p.value)f(a.value[a.value.length-1]);else{var e=a.value.map((function(e){return e.value})).indexOf(p.value.value)-1;e<0&&(e=a.value.length-1),f(a.value[e])}i((function(){b()}))}}}(e,0,{filteredOptions:f.filteredOptions,handleOptionClick:f.handleOptionClick,search:c.search}),v=function(e,t,n){var r=l(e).value,u=n.update,a=n.close,o=n.clearPointer;return{handleBackspace:function(e){u(E(r.value).slice(0,-1))},handleEsc:function(e){a(),o(),e.target.blur()}}}(e,0,{update:r.update,close:s.close,clearPointer:d.clearPointer});return n(n(n(n(n(n(n({},r),c),s),p),f),d),v)}},L={class:"multiselect-single-label"},M={class:"multiselect-multiple-label"},$={key:2,class:"multiselect-tags"},H={class:"multiselect-tag"},N={key:3,class:"multiselect-search"},K={class:"multiselect-spinner"},F={class:"multiselect-no-options"},R={class:"multiselect-no-results"};C.render=function(e,t,n,r,l,u){return c(),s("div",{class:["multiselect",["is-".concat(n.mode),{"is-open":e.isOpen,"is-searchable":n.searchable,"is-disabled":n.disabled,"no-caret":!n.caret}]],id:n.id,onKeydown:t[26]||(t[26]=p(f((function(){}),["prevent"]),["enter"])),ref:"multiselect"},[d("div",{class:"multiselect-input",tabindex:e.tabindex,onFocus:t[18]||(t[18]=function(){return e.open&&e.open.apply(e,arguments)}),onBlur:t[19]||(t[19]=function(){return e.close&&e.close.apply(e,arguments)}),onKeyup:[t[20]||(t[20]=p((function(){return e.handleEsc&&e.handleEsc.apply(e,arguments)}),["esc"])),t[21]||(t[21]=p((function(){return e.selectPointer&&e.selectPointer.apply(e,arguments)}),["enter"]))],onKeydown:[t[22]||(t[22]=p(f((function(){return e.handleBackspace&&e.handleBackspace.apply(e,arguments)}),["prevent"]),["delete"])),t[23]||(t[23]=p(f((function(){return e.backwardPointer&&e.backwardPointer.apply(e,arguments)}),["prevent"]),["up"])),t[24]||(t[24]=p(f((function(){return e.forwardPointer&&e.forwardPointer.apply(e,arguments)}),["prevent"]),["down"]))]},["single"==n.mode&&e.hasSelected&&!e.search?v(e.$slots,"singleLabel",{key:0,value:e.valueObject},(function(){return[d("div",L,b(e.valueObject[n.label]),1)]})):h("v-if",!0),"multiple"==n.mode&&e.hasSelected&&!e.search?v(e.$slots,"multipleLabel",{key:1,values:e.valueObject},(function(){return[d("div",M,b(e.multipleLabelText),1)]})):h("v-if",!0),"tags"==n.mode?(c(),s("div",$,[(c(!0),s(y,null,m(e.valueObject,(function(r,l,u){return c(),s("span",{key:u},[v(e.$slots,"tag",{option:r,remove:e.remove,disabled:n.disabled},(function(){return[d("div",H,[g(b(r[n.label])+" ",1),n.disabled?h("v-if",!0):(c(),s("i",{key:0,onClick:t[1]||(t[1]=f((function(){}),["prevent"])),onMousedown:f((function(t){return e.remove(r)}),["prevent"])},null,40,["onMousedown"]))])]}))])})),128)),n.searchable&&!n.disabled?(c(),s("div",{key:0,class:"multiselect-search",style:{width:e.tagsSearchWidth}},[O(d("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.search=t}),onFocus:t[3]||(t[3]=f((function(){return e.open&&e.open.apply(e,arguments)}),["stop"])),onBlur:t[4]||(t[4]=f((function(){return e.close&&e.close.apply(e,arguments)}),["stop"])),onKeyup:[t[5]||(t[5]=p(f((function(){return e.handleEsc&&e.handleEsc.apply(e,arguments)}),["stop"]),["esc"])),t[6]||(t[6]=p(f((function(){return e.selectPointer&&e.selectPointer.apply(e,arguments)}),["stop"]),["enter"]))],onKeydown:[t[7]||(t[7]=p((function(){return e.handleTagsSearchBackspace&&e.handleTagsSearchBackspace.apply(e,arguments)}),["delete"])),t[8]||(t[8]=p(f((function(){return e.backwardPointer&&e.backwardPointer.apply(e,arguments)}),["stop"]),["up"])),t[9]||(t[9]=p(f((function(){return e.forwardPointer&&e.forwardPointer.apply(e,arguments)}),["stop"]),["down"]))],style:{width:e.tagsSearchWidth},ref:"input"},null,36),[[S,e.search]])],4)):h("v-if",!0)])):h("v-if",!0),"tags"!==n.mode&&n.searchable&&!n.disabled?(c(),s("div",N,[O(d("input",{"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.search=t}),onFocus:t[11]||(t[11]=f((function(){return e.open&&e.open.apply(e,arguments)}),["stop"])),onBlur:t[12]||(t[12]=f((function(){return e.close&&e.close.apply(e,arguments)}),["stop"])),onKeyup:[t[13]||(t[13]=p(f((function(){return e.handleEsc&&e.handleEsc.apply(e,arguments)}),["stop"]),["esc"])),t[14]||(t[14]=p(f((function(){return e.selectPointer&&e.selectPointer.apply(e,arguments)}),["stop"]),["enter"]))],onKeydown:[t[15]||(t[15]=p(f((function(){}),["stop"]),["delete"])),t[16]||(t[16]=p(f((function(){return e.backwardPointer&&e.backwardPointer.apply(e,arguments)}),["stop"]),["up"])),t[17]||(t[17]=p(f((function(){return e.forwardPointer&&e.forwardPointer.apply(e,arguments)}),["stop"]),["down"]))],ref:"input"},null,544),[[S,e.search]])])):h("v-if",!0),O(d("div",{class:"multiselect-placeholder"},b(n.placeholder),513),[[w,n.placeholder&&!e.hasSelected&&!e.search]]),d(P,{name:"multiselect-loading"},{default:k((function(){return[O(d("div",K,null,512),[[w,n.loading]])]})),_:1})],40,["tabindex"]),d(P,{name:"multiselect",onAfterLeave:e.clearSearch},{default:k((function(){return[O(d("div",{class:"multiselect-options",style:{maxHeight:e.contentMaxHeight}},[v(e.$slots,"beforeList"),(c(!0),s(y,null,m(e.filteredOptions,(function(r,l,u){return c(),s("a",{href:"",class:["multiselect-option",{"is-pointed":e.isPointed(r),"is-selected":e.isSelected(r)}],key:u,onMousedown:t[25]||(t[25]=f((function(){}),["prevent"])),onMouseenter:function(t){return e.setPointer(r)},onClick:f((function(t){return e.handleOptionClick(r)}),["stop","prevent"])},[v(e.$slots,"option",{option:r,search:e.search},(function(){return[d("span",null,b(r[n.label]),1)]}))],42,["onMouseenter","onClick"])})),128)),O(d("span",null,[v(e.$slots,"noOptions",{},(function(){return[d("div",F,b(n.noOptionsText),1)]}))],512),[[w,e.noOptions]]),O(d("span",null,[v(e.$slots,"noResults",{},(function(){return[d("div",R,b(n.noResultsText),1)]}))],512),[[w,e.noResults]]),v(e.$slots,"afterList")],4),[[w,e.isOpen]])]})),_:3},8,["onAfterLeave"])],42,["id"])},C.__file="src/Multiselect.vue";export default C;
